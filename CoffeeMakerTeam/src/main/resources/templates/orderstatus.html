<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>CoffeeMaker</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

</head>
<body>
	<style>
		body {
			background-color: #4b3120;
	
		}
		.panel {
			background-color: #DAC3A2;
			width: 90%;
			margin: auto;
			margin-top: 3%;
			margin-bottom: 3%;
			height:90%;
			z-index: -1;
			padding: 3%;
			border-radius: 10px;
		}
		
		h1{
			color: #FFFFFF;
			font-family: Arial;
			font-weight: bold;
			font-size: 28px;
		}
		
		.header-box {
			background-color: #4b3120;
			padding-left: 2%;
			padding-top: 0.1%;
			padding-bottom: 0.1%;
			text-align: left;
			border-radius: 10px;
		}
		
		.index-button {
			background-color: #896145;
			color: white;
			font-size: 20px;
			font-weight: bold;
			padding:1%;
			width: 20%;
			text-align: left;
			border: none;
			border-radius: 10px;
			margin-top: 2%;
			text-decoration: none;
			cursor: pointer;
			transition: background-color 0.3s;
		}
		
		.index-button:hover {
			background-color: #5E371D;
		}
		
		.order-button {
			background-color: #6F4E37;
			color: white;
			font-size: 20px;
			font-weight: bold;
			padding:1%;
			width: 100%;
			text-align: left;
			border: none;
			border-radius: 10px;
			margin-top: 2%;
			text-decoration: none;
			cursor: pointer;
			transition: background-color 0.3s;
		}
		
		.order-button:hover {
			background-color: #5E371D;
		}
		
		table {
			width: 100%;
			margin-top:1%;
		}
		
		.heading {
			display: flex;
			flex-direction: row;
			justify-content: space-between;
			width: 100%;
			font-size: 20px;
			font-weight: bold;
			margin-bottom: -2.5%;
			font-family: Arial;
		}
		

	</style>
	
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
		crossorigin="anonymous"></script>

	<script>

		/*<![CDATA[*/
		var app = angular.module('myApp', []);
		app.controller('orderStatusCtrl', function ($scope, $http) {
			
			$scope.customer = JSON.parse(sessionStorage.getItem("currentUser"));
			
			$scope.order = {
				
				"user": $scope.customer,
				"isComplete": false,
				"isPickedUp": false,
				
			};
			
			/**
			* Gets the orders from the user orders
			*/ 
			$scope.getOrders = function () {
				
				$http.post("/api/v1/order/status", $scope.customer).then(function (successResponse) {
					
					$scope.orderList = successResponse.data;
					
				})
				
			}
			
			$scope.getOrders();
			console.log($scope.orderList);
			
		});
		
	</script>
	
	<div class="panel" ng-app="myApp" ng-controller="orderStatusCtrl">
		
		<div class="header-box">
			<h1 align="center">Order Status</h1>
		</div>
		
		<div class="heading">
			
			<h3>Order Name</h3>
			<h3 style="padding-left: 7%;">Status</h3>
			<h3>Customer Pickup</h3>
			
		</div> 
		
		<table id="orderTable">
			
			<tbody>
				
				<tr ng-repeat="order in orderList">
					
					<td scope="row">{{order.name}}</td>
					<td scope="row">{{order.status}}</td>
					<td scope="row"><button class"index-button"> Pickup </button></td>
					
				</tr>
				
			</tbody>
			
			<tr>
				<td><button class="order-button" onclick="window.location.href='makecoffee'"> Order Coffee </button></td>
			</tr>
		</table>
		
		<table>
			<tr>
				<td style="text-align: right;"><button onclick="window.location.href='customerindex'" class="index-button" style="text-align: center; width: 10%"> Home </button></td>
			</tr>
		</table>

	</div>

</body>
</html>
